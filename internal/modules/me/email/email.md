### Электронный адрес

#### Изменение

```http
PATCH https://api.url/me/email HTTP/1.1
```

*Изменяет электронный адрес*

Данная операция выполняется в два шага:
1. Отправка электронного адреса, инициирующая отправку на него уникальной ссылки. Сам адрес записывается пользователю со статусом "не подтвержден"
2. Переход по ссылке, в результате статус email у пользователя меняется на "подтвержден"

##### Запрос

- Требует авторизации: да

Нагрузка (тело)
| Имя      | Тип     | Описание                                             |
| -------- | ------- | ---------------------------------------------------- |
| email    | string  | Электронный адрес                                    |

##### Результат

- Возможна фильтрация: нет
- Возможен выбор полей: нет

Пример ответа в случае успеха

*тело:*
```json
null
```

Возвращаемые поля (2 шаг)
| Имя      | Тип                            | Описание              |
| -------- | ------------------------------ | --------------------- |
| ID       | int                            | Код                   |
| phone    | int                            | Номер телефона        |
| name     | ?string                        | Имя                   |
| sname    | ?string                        | Фамилия               |
| pname    | ?string                        | Отчество              |
| email    | ?string                        | Email                 |
| birthday | ?time                          | Дата рождения         |
| avatar   | ?string                        | Ссылка на аватар      |

Пример ответа в случае успеха

*тело:*
```json
{
  "ID": 33,
  "phone": 9876543210,
  "name": "Энакин",
  "sname": "Скайуокер",
  "email": "any@tatooine.sw",
  "birthday": "2019-12-13T00:00:00Z",
  "avatar": "/avatars/32osh89hasofina49hfonsadhfaf4.jpg",
}
```

##### Ошибки
- `46001` - Ошибка авторизации
- `46002` - Ошибка открытия соединения с БД
- `46003` - Ошибка чтения тела запроса
- `46004` - Ошибка парсинга тела запроса
- `46005` - Ошибка компиляции w3sql-запроса для изменения номера телефона
- `46006` - Ошибка выполнения SQL-запроса для изменения номера телефона
- `46007` - Ошибка сканирования результатов SQL-запроса для изменения номера телефона
- `46008` - Не передан электронный адрес
- `46009` - Ошибка отправки электронного сообщения
- `46010` - Передан некорректный email
- `46011` - Ошибка открытия транзакции

[К содержанию](#содержание)
