### Номер телефона

#### Изменение

```http
PATCH https://api.url/me/phone HTTP/1.1
```

*Изменяет номер телефона*

Данная операция выполняется в два шага:
1. Отправка номера телефона, инициирующая отправку кода подтверждения на него
2. Отправка номера телефона и кода подтверждения

##### Запрос

- Требует авторизации: да

Нагрузка (тело)
| Имя      | Тип     | Описание                                             |
| -------- | ------- | ---------------------------------------------------- |
| phone    | int     | Номер телефона                                       |
| code     | ?string | Код подтверждения                                    |

##### Результат

- Возможна фильтрация: нет
- Возможен выбор полей: нет

Возвращаемые поля (1 шаг)
| Имя     | Тип  | Описание                                                               |
| ------- | ---- | ---------------------------------------------------------------------- |
| timeout | ?int | Количество секунд до возможности повторной отправки кода подтверждения |

Пример ответа в случае успеха

*тело:*
```json
{
  "timeout": 30
}
```

Возвращаемые поля (2 шаг)
| Имя      | Тип                            | Описание              |
| -------- | ------------------------------ | --------------------- |
| ID       | int                            | Код                   |
| phone    | int                            | Номер телефона        |
| name     | ?string                        | Имя                   |
| sname    | ?string                        | Фамилия               |
| pname    | ?string                        | Отчество              |
| email    | ?string                        | Email                 |
| birthday | ?time                          | Дата рождения         |
| avatar   | ?string                        | Ссылка на аватар      |
| roles    | [UserRole[]](#userrole-struct) | Список ролей          |

Пример ответа в случае успеха

*тело:*
```json
{
  "ID": 33,
  "phone": 9876543210,
  "name": "Энакин",
  "sname": "Скайуокер",
  "email": "any@tatooine.sw",
  "birthday": "2019-12-13T00:00:00Z",
  "/avatars/32osh89hasofina49hfonsadhfaf4.jpg",
  "roles": [
    {
      "role": "site_user"
    }
  ]
}
```

##### Ошибки
- `22001` - Ошибка авторизации
- `22002` - Ошибка открытия соединения с БД
- `22003` - Ошибка чтения тела запроса
- `22004` - Ошибка парсинга тела запроса
- `22005` - Ошибка компиляции w3sql-запроса для изменения номера телефона
- `22006` - Ошибка выполнения SQL-запроса для изменения номера телефона
- `22007` - Ошибка сканирования результатов SQL-запроса для изменения номера телефона
- `22008` - Не передан номер телефона
- `22009` - Пользователь заблокирован
- `22010` - Таймаут ожидания для отправки СМС не истёк
- `22011` - Ошибка отправки СМС
- `22012` - Некорректный номер телефона

[К содержанию](#содержание)